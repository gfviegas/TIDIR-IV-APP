<ion-header>

  <ion-navbar color="gold">
    <ion-title>Cadastro</ion-title>
  </ion-navbar>

</ion-header>


<ion-content padding class="sign-in-page">
  <p text-center>Faça seu cadastro!</p>
  <form [formGroup]="signInForm" novalidate="">

    <ion-list>
      <ion-item>
        <ion-label>Nome*</ion-label>
        <ion-input [formControl]="name" type="text"></ion-input>
      </ion-item>
      <div *ngIf="!name.valid && (name.touched || formSubmitted)">
        <p padding-left color="danger" *ngIf="name.errors?.required">Este campo é obrigatório</p>
        <p padding-left color="danger" *ngIf="name.errors?.minlength">Este campo deve ter pelo menos 8 caracteres</p>
      </div>

      <ion-item>
        <ion-label>Email*</ion-label>
        <ion-input [formControl]="email" type="email" [pattern]="emailRegex"></ion-input>
      </ion-item>
      <!-- <p>{{email.errors | json}}</p> -->
      <div *ngIf="!email.valid && (email.touched || formSubmitted)">
        <p padding-left color="danger" *ngIf="email.errors?.required">Este campo é obrigatório</p>
        <p padding-left color="danger" *ngIf="email.errors?.minlength">Este campo deve ter pelo menos 8 caracteres</p>
        <p padding-left color="danger" *ngIf="email.errors?.pattern">Este campo deve ser um email válido</p>
        <p padding-left color="danger" *ngIf="email.errors?.taken">Este email já está cadastrado</p>
      </div>

      <ion-item ngControlGroup="passwords">
        <ion-label>Senha*</ion-label>
        <ion-input [formControl]="password" type="password"></ion-input>
      </ion-item>
      <div *ngIf="!password.valid && (password.touched || formSubmitted)">
        <p padding-left color="danger" *ngIf="password.errors?.required">Este campo é obrigatório</p>
        <p padding-left color="danger" *ngIf="password.errors?.minlength">Este campo deve ter pelo menos 8 caracteres</p>
      </div>
      <ion-item ngControlGroup="passwords">
        <ion-label>Repita a Senha*</ion-label>
        <ion-input [formControl]="confirm" type="password"></ion-input>
      </ion-item>
      <div *ngIf="!confirm.valid && (confirm.touched || formSubmitted)">
        <p padding-left color="danger" *ngIf="confirm.errors?.required">Este campo é obrigatório</p>
        <p padding-left color="danger" *ngIf="confirm.errors?.minlength">Este campo deve ter pelo menos 8 caracteres</p>
        <p padding-left color="danger" *ngIf="confirm.errors?.notEqual">Os campos não são idênticos</p>
      </div>

      <ion-item ngControlGroup="contact">
        <ion-label>Whatsapp</ion-label>
        <ion-input [formControl]="whatsapp" type="number" pattern="^[1-9]{2}[2-9][0-9]{3,4}[0-9]{4}$"></ion-input>
      </ion-item>
      <div *ngIf="!whatsapp.valid && (whatsapp.touched || formSubmitted)">
        <p padding-left color="danger" *ngIf="whatsapp.errors?.pattern">O campo deve ter o formato 99 999999999</p>
      </div>
      <ion-item ngControlGroup="contact">
        <ion-label>Outro Telefone</ion-label>
        <ion-input [formControl]="phone" type="number" pattern="^[1-9]{2}[2-9][0-9]{3,4}[0-9]{4}$"></ion-input>
      </ion-item>
      <div *ngIf="!phone.valid && (phone.touched || formSubmitted)">
        <p padding-left color="danger" *ngIf="whatsapp.errors?.pattern">O campo deve ter o formato 99 999999999</p>
      </div>
      <ion-item ngControlGroup="contact">
        <ion-label>Link Facebook</ion-label>
        <ion-input [formControl]="facebook" type="text"></ion-input>
      </ion-item>
      <div *ngIf="!facebook.valid && (facebook.touched || formSubmitted)">
        <p padding-left color="danger" *ngIf="facebook.errors?.pattern">Este campo é obrigatório</p>
      </div>

      <ion-item ngControlGroup="location">
        <ion-label>Estado*</ion-label>
        <ion-select [formControl]="state" (ionChange)="clearCity()" multiple="false" cancelText="Cancelar" okText="Selecionar">
          <ion-option *ngFor="let uf of ufs" [value]="uf">{{uf.name}}</ion-option>
        </ion-select>
      </ion-item>
      <div *ngIf="!state.valid && (state.touched || formSubmitted)">
        <p padding-left color="danger" *ngIf="state.errors?.required">Este campo é obrigatório</p>
      </div>

      <ion-item ngControlGroup="location" (click)="presentCitiesModal()">
        <ion-label class="gray-content">Cidade*</ion-label>
        <ion-note item-right class="black-content">
          <!-- <ion-input item-right [formControl]="city" disabled placeholder="Clique para escolher.." type="text"></ion-input> -->
          {{(city.value ? city.value : 'Nenhum Selecionado')}}
          <ion-icon name="arrow-forward"></ion-icon>
        </ion-note>
      </ion-item>
      <div *ngIf="!city.valid && (city.touched || formSubmitted)">
        <p padding-right text-right color="danger" *ngIf="city.errors?.required">Este campo é obrigatório</p>
      </div>

      <ion-item>
        <ion-label class="gray-content"> Cadastrar como Vendedor</ion-label>
        <ion-toggle [formControl]="signAsSeller" checked="false"></ion-toggle>
      </ion-item>

    </ion-list>

    <p>Os campos com * são obrigatórios</p>
    <p>Ao se cadastrar você concorda com nossos <a class="hyperlink" (click)="presentTermsModal()">Termos de Uso</a> </p>


    <div padding class="submit-block">
      <button ion-button color="primary" block  (click)="signIn()">Cadastrar</button>
    </div>
  </form>

</ion-content>
